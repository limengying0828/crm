<!DOCTYPE html>
<!--suppress ALL-->
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <title>查询所有跟单</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="/layui/css/layui.css"  media="all">
    <!-- 注意：如果你直接复制所有代码到本地，上述css路径需要改成你本地的 -->
</head>
<body>

    <div style="float: right;width: 100%">

        <form class="layui-form-item" action="/documentary/queryAll.do">
            <div class="layui-form-item">
                <label class="layui-form-label">输入框</label>
                <div class="layui-input-block" style="width: 30%">
                    <input type="text" style="width: 150px" name="theme"  placeholder="请输入跟单主题"  class="layui-input">
                </div>

                <div class="layui-input-block" style="width: 30%">
                    <input type="text" style="width: 150px" name="documentarytime"  placeholder="请输入跟单时间"  class="layui-input">
                </div>

                <div class="layui-input-block" style="width: 30%">
                    <input type="text" style="width: 150px" name="username"  placeholder="请输入跟单人"  class="layui-input">
                </div>
            </div>

            <div class="layui-form-item">
                <div class="layui-input-block">
                    <button class="layui-btn" lay-submit lay-filter="formDemo">查询</button>
                    <button type="reset" class="layui-btn layui-btn-primary">重置</button>
                </div>
            </div>
        </form>


        <script type="text/html" id="toolbarDemo">
            <div class="layui-btn-container">
                <button class="layui-btn " lay-event="add">
                    <i class="layui-icon">&#xe61f;</i>
                    <a href="/html/pml/documentary/addDocument.html">添加</a>
                </button>
            </div>
        </script>

        <table class="layui-hide" id="test"></table>
    </div>



<script src="/layui/layui.js" charset="utf-8"></script>
    <script src="/js/jquery-3.4.1.js"></script>
<!-- 注意：如果你直接复制所有代码到本地，上述js路径需要改成你本地的 -->
<script>
    layui.use(['table','form','layer'], function(){
        var table = layui.table;
        var form =layui.form;
        var layer = layui.layer;

        table.render({
             elem: '#test'
            ,url:'/documentary/queryAll.do'
            ,toolbar: '#toolbarDemo'
            ,width:1000
            ,dataType:'JSONP'
            ,cols: [[
                {field:'documentarytime', width:150, title: '跟单时间', sort: true}
                ,{field:'theme', width:150, title: '跟单主题',templet:'<div><a href="/documentary/selectTheme.do?theme={{d.theme}}">{{d.theme}}</a></div>'}/*d代表当前行*/
                ,{field:'username', width:150, title: '跟单人', sort: true}
                ,{field:'detail', width:150, title: '详细内容'}
                ,{field:'attachment',templet:function(d){
                        return'<div><img style="height: 50px;width: 50px" src='+d.attachment+'></div>'
                    }, title: '附件', width: 150,sort: true}
            ]]
            ,page: false
        });


        form.on('submit(formDemo)', function(data){
            table.reload('test', {
                url: '/documentary/queryAll.do'
                ,where: {
                    theme:data.field.theme,
                    documentarytime:data.field.documentarytime,
                    username:data.field.username
                } //设定异步数据接口的额外参数
            });
            return false;
        });
    });

    var jump = function (theme) {
        location.href="/documentary/selectTheme.do?theme="+theme;
    }
</script>

</body>
</html>